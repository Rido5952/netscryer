services:
  api:
    image: tiangolo/uvicorn-gunicorn-fastapi:python3.11
    volumes:
      - ./backend:/app
    environment:
      - DATABASE_URL=sqlite:///data.db
    ports:
      - "8000:80"     # API -> OK

  panel:
    image: nginx:alpine
    volumes:
      - ./frontend:/usr/share/nginx/html
    ports:
      - "8088:80"     # ‚ùó 80 yerine 8088

  agent:
    image: python:3.11-slim
    volumes:
      - ./agent:/agent
    command: python /agent/agent.py

  prometheus:
    image: prom/prometheus
    volumes:
      - ./infra/prometheus.yml:/etc/prometheus/prometheus.yml:ro
    ports:
      - "9095:9090"

  grafana:
    image: grafana/grafana
    ports:
      - "3005:3000"
