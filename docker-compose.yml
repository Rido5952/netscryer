version: "3.9"
services:
  api:
    image: tiangolo/uvicorn-gunicorn-fastapi:python3.11
    volumes: ["./backend:/app"]
    environment:
      - DATABASE_URL=sqlite:///data.db
    ports: ["8000:80"]
  panel:
    image: nginx:alpine
    volumes: ["./frontend:/usr/share/nginx/html"]
    ports: ["80:80"]
  agent:
    image: python:3.11-slim
    volumes: ["./agent:/agent"]
    command: python /agent/agent.py
  prometheus:
    image: prom/prometheus
    volumes: ["./infra/prometheus.yml:/etc/prometheus/prometheus.yml"]
    ports: ["9090:9090"]
  grafana:
    image: grafana/grafana
    ports: ["3000:3000"]
